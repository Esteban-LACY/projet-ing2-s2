<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Publier un logement - OmnesBnB</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #fff; }
        .container-publier { max-width: 1100px; margin: auto; }
        .transition { transition: all .2s; }
        .onglet-header { border: none !important; box-shadow: none !important; }
        @media (max-width: 768px) {
            .container-publier { max-width: 100%; padding: 0 0.5rem; }
            .table-box, .form-box { padding: 1.1rem 0.6rem !important; }
            .header-title { font-size: 2rem !important; }
            .header-sub { font-size: 1.1rem !important; }
        }
        .table-box table { table-layout: fixed; width: 100%; }
        .table-box th, .table-box td { word-break: break-word; white-space: normal; }
    </style>
</head>
<body class="bg-white">

<!-- Header navigation -->
<header class="bg-white sticky top-0 z-50 border-b-2 border-black shadow-sm">
    <div class="container mx-auto px-4">
        <div class="flex items-center justify-between h-16">
            <a href="index.html" class="text-black font-bold text-xl">OmnesBnB</a>
            <nav class="hidden md:flex items-center space-x-6">
                <a href="recherche.html" class="text-sm text-black hover:text-black">Chercher</a>
                <a href="publier.html" class="text-sm text-black hover:text-black">Publier</a>
                <a href="mes-locations.html" class="text-sm text-black hover:text-black">Mes locations</a>
                <div class="h-8 w-px mx-3 border-l-2 border-black"></div>
                <a href="connexion.html" class="text-sm bg-black text-white py-2 px-6 rounded-lg hover:bg-gray-800">
                    Connexion / Inscription
                </a>
            </nav>
            <div class="md:hidden">
                <button id="menu-burger" class="flex items-center p-2 rounded-lg border-2 border-black">
                    <i class="fas fa-bars text-gray-700"></i>
                </button>
            </div>
        </div>
        <div id="menu-mobile" class="md:hidden hidden py-3">
            <a href="recherche.html" class="block py-2 text-sm text-black font-medium text-center">Chercher</a>
            <a href="publier.html" class="block py-2 text-sm text-black font-medium text-center">Publier</a>
            <a href="mes-locations.html" class="block py-2 text-sm text-black font-medium text-center">Mes locations</a>
            <div class="w-4/5 mx-auto border-t-2 border-black my-3"></div>
            <a href="connexion.html" class="block text-sm bg-black text-white py-2 px-6 rounded-lg text-center hover:bg-gray-800">
                Connexion / Inscription
            </a>
        </div>
    </div>
</header>

<!-- Bandeau noir façon connexion.html -->
<section class="bg-black py-12 px-4 flex flex-col items-center justify-center">
    <h1 class="text-white text-4xl md:text-5xl font-bold mb-3 text-center leading-tight">
        Publier ou gérer vos annonces
    </h1>
    <p class="text-white text-lg md:text-2xl mb-8 opacity-90 text-center">
        Décrivez votre logement ou gérez vos annonces existantes.
    </p>
    <div class="bg-white border-2 border-black rounded-2xl shadow-lg max-w-3xl w-full mx-auto p-0 flex flex-col items-center relative overflow-visible">
        <div class="flex w-full items-stretch relative" style="min-height:72px">
            <button id="onglet-nouveau" class="onglet-header flex-1 text-2xl font-bold py-5 transition text-black focus:outline-none z-10">
                Nouvelle annonce
            </button>
            <div class="absolute top-0 bottom-0 left-1/2 transform -translate-x-1/2 w-px border-l-2 border-black z-20"></div>
            <button id="onglet-modifier" class="onglet-header flex-1 text-2xl font-bold py-5 transition text-gray-400 hover:text-black focus:outline-none z-10">
                Gérer mes annonces
            </button>
        </div>
    </div>
</section>

<section id="zone-publier" class="py-10 px-2 bg-white">
    <div class="container-publier">
        <!-- Bloc Nouvelle annonce -->
        <div id="bloc-nouveau" class="w-full">
            <form class="form-box bg-white border-2 border-black rounded-2xl shadow-lg p-8 mx-auto space-y-8">
                <div>
                    <label for="titre" class="block text-lg font-semibold text-gray-700 mb-2">Titre de l'annonce</label>
                    <input type="text" id="titre" name="titre"
                        placeholder="Ex: Studio lumineux près du campus"
                        class="w-full border-2 border-black rounded-lg py-3 px-4 bg-white text-gray-900 text-lg placeholder-gray-400 focus:outline-none" required />
                </div>
                <div>
                    <label for="type-logement" class="block text-lg font-semibold text-gray-700 mb-2">Type de logement</label>
                    <select id="type-logement" name="type-logement"
                        class="w-full border-2 border-black rounded-lg py-3 px-4 bg-white text-gray-900 text-lg focus:outline-none" required>
                        <option value="">Sélectionnez</option>
                        <option value="studio">Studio</option>
                        <option value="appartement">Appartement</option>
                        <option value="chambre">Chambre</option>
                        <option value="colocation">Colocation</option>
                        <option value="autre">Autre</option>
                    </select>
                </div>
                <div>
                    <label for="adresse" class="block text-lg font-semibold text-gray-700 mb-2">Adresse complète</label>
                    <input type="text" id="adresse" name="adresse"
                        placeholder="Ex: 23 Rue Victor Hugo, 69000 Lyon"
                        class="w-full border-2 border-black rounded-lg py-3 px-4 bg-white text-gray-900 text-lg placeholder-gray-400 focus:outline-none" required />
                </div>
                <!-- PRIX & CAUTION (nouvelle version 4 champs + caution) -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label class="block text-lg font-semibold text-gray-700 mb-2">Prix / nuit (€)</label>
                        <input type="number" id="prix_nuit" name="prix_nuit" placeholder="Ex: 50"
                            class="w-full border-2 border-black rounded-lg py-3 px-4 bg-white text-gray-900 text-lg placeholder-gray-400 focus:outline-none" required />
                    </div>
                    <div>
                        <label class="block text-lg font-semibold text-gray-700 mb-2">Prix / semaine (€)</label>
                        <input type="number" id="prix_semaine" name="prix_semaine" placeholder="Ex: 300"
                            class="w-full border-2 border-black rounded-lg py-3 px-4 bg-white text-gray-900 text-lg placeholder-gray-400 focus:outline-none" required />
                    </div>
                    <div>
                        <label class="block text-lg font-semibold text-gray-700 mb-2">Prix / mois (€)</label>
                        <input type="number" id="prix_mois" name="prix_mois" placeholder="Ex: 900"
                            class="w-full border-2 border-black rounded-lg py-3 px-4 bg-white text-gray-900 text-lg placeholder-gray-400 focus:outline-none" required />
                    </div>
                    <div>
                        <label class="block text-lg font-semibold text-gray-700 mb-2">Prix / année (€)</label>
                        <input type="number" id="prix_annee" name="prix_annee" placeholder="Ex: 10500"
                            class="w-full border-2 border-black rounded-lg py-3 px-4 bg-white text-gray-900 text-lg placeholder-gray-400 focus:outline-none" required />
                    </div>
                    <div class="md:col-span-2">
                        <label for="caution" class="block text-lg font-semibold text-gray-700 mb-2">Caution (€)</label>
                        <input type="number" id="caution" name="caution" placeholder="Ex: 1000"
                            class="w-full border-2 border-black rounded-lg py-3 px-4 bg-white text-gray-900 text-lg placeholder-gray-400 focus:outline-none" required />
                    </div>
                </div>
                <!-- PHOTOS LOGEMENT : photo principale + annexes -->
                <div>
                    <label for="photo_principale" class="block text-lg font-semibold text-gray-700 mb-2">Photo principale (obligatoire)</label>
                    <input type="file" id="photo_principale" name="photo_principale" accept="image/png, image/jpeg, image/webp"
                        class="w-full text-lg file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-2 file:border-black file:text-black file:bg-white file:font-semibold" required />
                    <p class="text-xs text-gray-500 mt-1">C'est la photo principale affichée sur l'annonce (formats : jpg, png, webp).</p>
                </div>
                <div>
                    <label for="photos_annexes" class="block text-lg font-semibold text-gray-700 mb-2">Photos annexes (optionnelles)</label>
                    <input type="file" id="photos_annexes" name="photos_annexes" multiple accept="image/png, image/jpeg, image/webp"
                        class="w-full text-lg file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-2 file:border-black file:text-black file:bg-white file:font-semibold"/>
                    <p class="text-xs text-gray-500 mt-1">Ajoutez des photos supplémentaires si besoin (formats : jpg, png, webp).</p>
                </div>
                <!-- FIN PHOTOS LOGEMENT -->
                <div>
                    <label for="description" class="block text-lg font-semibold text-gray-700 mb-2">Description</label>
                    <textarea id="description" name="description" rows="4"
                        placeholder="Décrivez votre logement, les points forts, etc."
                        class="w-full border-2 border-black rounded-lg py-3 px-4 bg-white text-gray-900 text-lg placeholder-gray-400 focus:outline-none"></textarea>
                </div>
                <button type="submit" class="bg-black text-white font-bold py-4 px-8 rounded-lg w-full hover:bg-gray-800 transition-all shadow-md text-2xl">
                    Publier l'annonce
                </button>
            </form>
        </div>

        <!-- Bloc Gérer mes annonces -->
        <div id="bloc-modifier" class="w-full hidden">
            <div class="table-box bg-white border-2 border-black rounded-2xl shadow-lg p-8 mx-auto">
                <h2 class="text-2xl font-bold mb-4 text-center">Vos annonces</h2>
                <table class="w-full border-collapse">
                    <thead>
                        <tr>
                            <th class="border-b-2 border-black px-2 py-2 text-left text-lg font-semibold">Titre</th>
                            <th class="border-b-2 border-black px-2 py-2 text-left text-lg font-semibold">Statut</th>
                            <th class="border-b-2 border-black px-2 py-2 text-left text-lg font-semibold">Action</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="border-b border-gray-200 px-2 py-3 whitespace-normal break-words text-xs md:text-base">Appartement T2 centre-ville</td>
                            <td class="border-b border-gray-200 px-2 py-3 whitespace-normal break-words text-xs md:text-base">Annonce publiée</td>
                            <td class="border-b border-gray-200 px-2 py-3 flex flex-row flex-nowrap gap-1 items-center justify-start whitespace-normal break-words min-w-0">
                                <button class="bg-black text-white py-2 px-2 md:px-4 rounded-lg hover:bg-gray-800 transition-all text-xs md:text-sm btn-modifier w-full md:w-auto">
                                    <span class="hidden md:inline">Modifier</span>
                                    <span class="md:hidden">Modif.</span>
                                </button>
                                <button class="bg-red-600 text-white py-2 px-2 md:px-4 rounded-lg border-2 border-red-600 hover:bg-red-700 transition-all text-xs md:text-sm btn-supprimer w-full md:w-auto">
                                    <span class="hidden md:inline">Supprimer</span>
                                    <span class="md:hidden">Supp.</span>
                                </button>
                            </td>
                        </tr>
                        <tr>
                            <td class="border-b border-gray-200 px-2 py-3 whitespace-normal break-words text-xs md:text-base">Studio lumineux près du campus</td>
                            <td class="border-b border-gray-200 px-2 py-3 whitespace-normal break-words text-xs md:text-base">Bien loué</td>
                            <td class="border-b border-gray-200 px-2 py-3 flex flex-row flex-nowrap gap-1 items-center justify-start whitespace-normal break-words min-w-0">
                                <button class="bg-black text-white py-2 px-2 md:px-4 rounded-lg hover:bg-gray-800 transition-all text-xs md:text-sm w-full md:w-auto btn-info-location">
                                    <span>Info location</span>
                                </button>
                                <button class="bg-black text-white py-2 px-2 md:px-4 rounded-lg hover:bg-gray-800 transition-all text-xs md:text-sm w-full md:w-auto btn-info-locataire">
                                    <span>Info locataire</span>
                                </button>
                            </td>
                        </tr>
                    </tbody>
                </table>
                <div id="infos-deroulantes" class="mt-6"></div>
            </div>
        </div>
    </div>
</section>

<!-- Footer -->
<section class="bg-black text-white py-12 px-4">
    <div class="container mx-auto max-w-3xl text-center">
        <h2 class="text-2xl font-bold mb-4">Et maintenant ?</h2>
        <p class="text-sm mb-6 opacity-90">
            N’hésitez pas à découvrir nos logements en ligne sur OmnesBnB, et trouvez votre futur chez-vous en quelques clics.
        </p>
        <a href="recherche.html" class="bg-white text-black font-medium py-2 px-6 rounded-lg border border-white hover:bg-gray-100 inline-flex items-center shadow-md">
            <i class="fas fa-magnifying-glass mr-2"></i> Chercher un logement
        </a>
        <div class="mt-12 pt-4 border-t border-gray-700 mx-auto w-full"></div>
        <div class="text-center text-gray-400 text-xs mt-4">
            &copy; 2025 OmnesBnB. Tous droits réservés.
        </div>
    </div>
</section>

<script>
    // Responsive menu mobile
    document.getElementById('menu-burger').addEventListener('click', function() {
        document.getElementById('menu-mobile').classList.toggle('hidden');
    });

    // Onglets header
    const ongletNouveau = document.getElementById('onglet-nouveau');
    const ongletModifier = document.getElementById('onglet-modifier');
    const blocNouveau = document.getElementById('bloc-nouveau');
    const blocModifier = document.getElementById('bloc-modifier');

    function afficherNouveau() {
        ongletNouveau.classList.add('text-black');
        ongletNouveau.classList.remove('text-gray-400');
        ongletModifier.classList.add('text-gray-400');
        ongletModifier.classList.remove('text-black');
        blocNouveau.classList.remove('hidden');
        blocModifier.classList.add('hidden');
    }
    function afficherModifier() {
        ongletModifier.classList.add('text-black');
        ongletModifier.classList.remove('text-gray-400');
        ongletNouveau.classList.add('text-gray-400');
        ongletNouveau.classList.remove('text-black');
        blocModifier.classList.remove('hidden');
        blocNouveau.classList.add('hidden');
    }
    ongletNouveau.addEventListener('click', afficherNouveau);
    ongletModifier.addEventListener('click', afficherModifier);
    afficherNouveau(); // Par défaut

    // Bloc déroulant "Info location" & "Info locataire" (avec toggle)
    const infosDeroulantes = document.getElementById('infos-deroulantes');
    let infoOuverte = null;

    // Version centrée, bold + layout plus lisible
    const infoLocationHTML = `
        <div class="bg-white border-2 border-black rounded-2xl shadow-lg p-8 mx-auto mt-4 max-w-2xl animate-fade-in">
            <h3 class="text-2xl font-bold mb-6 text-center">Détail du logement</h3>
            <ul class="text-lg text-gray-900 space-y-1">
                <li><span class="font-bold">Titre&nbsp;:</span> Studio lumineux près du campus</li>
                <li><span class="font-bold">Type&nbsp;:</span> Studio</li>
                <li><span class="font-bold">Adresse&nbsp;:</span> 23 Rue Victor Hugo, 69000 Lyon</li>
                <li><span class="font-bold">Prix/nuit&nbsp;:</span> 50 €</li>
                <li><span class="font-bold">Prix/semaine&nbsp;:</span> 300 €</li>
                <li><span class="font-bold">Prix/mois&nbsp;:</span> 900 €</li>
                <li><span class="font-bold">Prix/année&nbsp;:</span> 10500 €</li>
                <li><span class="font-bold">Caution&nbsp;:</span> 1000 €</li>
                <li><span class="font-bold">Description&nbsp;:</span> Studio lumineux proche du campus avec toutes commodités.</li>
            </ul>
        </div>
    `;
    // Carte locataire sans boutons, centrée
    const infoLocataireHTML = `
        <div class="bg-white border-2 border-black rounded-2xl shadow-lg p-8 mx-auto mt-4 max-w-2xl flex flex-col items-center animate-fade-in">
            <div class="flex flex-col items-center w-full">
                <div class="w-28 h-28 rounded-xl overflow-hidden border-2 border-black bg-gray-100 flex items-center justify-center mb-4">
                    <img src="images/photo-profil.jpg" alt="Photo de profil" class="w-full h-full object-cover"
                         onerror="this.style.display='none'; this.parentNode.innerHTML='<i class=&quot;fas fa-user text-5xl text-gray-400&quot;></i>';">
                </div>
                <h2 class="text-2xl font-bold mb-2 text-center">Marie Dupont</h2>
                <div class="flex flex-wrap justify-center items-center text-gray-800 text-lg gap-x-3 gap-y-2 mb-1">
                    <span>marie.dupont@edu.ece.fr</span>
                    <span class="text-gray-400">|</span>
                    <span>06.12.34.56.78</span>
                </div>
                <div class="flex flex-wrap justify-center items-center text-gray-700 text-lg gap-x-3 gap-y-2 mb-1">
                    <span>Étudiant(e)</span>
                    <span class="text-gray-400">|</span>
                    <span>Paris</span>
                </div>
                <div class="mt-3 text-center text-gray-600 text-base w-full">
                    Étudiante en 3ème année d'ingénierie à l'ECE Paris. Je recherche un logement calme pour mes études.
                </div>
            </div>
        </div>
    `;

    // Toggle affichage info location/locataire
    document.addEventListener('DOMContentLoaded', function() {
        document.querySelectorAll('.btn-info-location').forEach(function(btn){
            btn.addEventListener('click', function(e){
                e.preventDefault();
                if(infoOuverte === 'location'){
                    infosDeroulantes.innerHTML = "";
                    infoOuverte = null;
                } else {
                    infosDeroulantes.innerHTML = infoLocationHTML;
                    infoOuverte = 'location';
                }
            });
        });
        document.querySelectorAll('.btn-info-locataire').forEach(function(btn){
            btn.addEventListener('click', function(e){
                e.preventDefault();
                if(infoOuverte === 'locataire'){
                    infosDeroulantes.innerHTML = "";
                    infoOuverte = null;
                } else {
                    infosDeroulantes.innerHTML = infoLocataireHTML;
                    infoOuverte = 'locataire';
                }
            });
        });
    });

    // Formulaire dynamique pour "Bien loué" (bouton Modifier/Supprimer)
    document.addEventListener('DOMContentLoaded', function() {
        document.querySelectorAll('#bloc-modifier .btn-modifier').forEach(function(btn){
            btn.addEventListener('click', function(e){
                e.preventDefault();
                const formModif = document.getElementById('infos-deroulantes');
                let titre = btn.closest('tr').children[0].textContent.trim();
                let etat = btn.closest('tr').children[1].textContent.trim();
                if(etat !== "Bien loué") return;
                formModif.innerHTML = `
            <form class="form-box bg-white border-2 border-black rounded-2xl shadow-lg p-6 mx-auto space-y-6 animate-fade-in">
                <h3 class="text-lg font-bold mb-4">Modifier l'annonce "<span class="text-black">${titre}</span>"</h3>
                <div>
                    <label class="block text-base font-semibold text-gray-700 mb-1">Titre de l'annonce</label>
                    <input type="text" value="${titre}" class="w-full border-2 border-black rounded-lg py-2 px-3 bg-white text-gray-900 text-base placeholder-gray-400 focus:outline-none"/>
                </div>
                <div>
                    <label class="block text-base font-semibold text-gray-700 mb-1">Type de logement</label>
                    <select class="w-full border-2 border-black rounded-lg py-2 px-3 bg-white text-gray-900 text-base focus:outline-none">
                        <option>Studio</option>
                        <option>Appartement</option>
                        <option>Chambre</option>
                        <option>Colocation</option>
                        <option>Autre</option>
                    </select>
                </div>
                <div>
                    <label class="block text-base font-semibold text-gray-700 mb-1">Adresse complète</label>
                    <input type="text" class="w-full border-2 border-black rounded-lg py-2 px-3 bg-white text-gray-900 text-base placeholder-gray-400 focus:outline-none"/>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label class="block text-base font-semibold text-gray-700 mb-1">Prix / nuit (€)</label>
                        <input type="number" class="w-full border-2 border-black rounded-lg py-2 px-3 bg-white text-gray-900 text-base placeholder-gray-400 focus:outline-none" required />
                    </div>
                    <div>
                        <label class="block text-base font-semibold text-gray-700 mb-1">Prix / semaine (€)</label>
                        <input type="number" class="w-full border-2 border-black rounded-lg py-2 px-3 bg-white text-gray-900 text-base placeholder-gray-400 focus:outline-none" required />
                    </div>
                    <div>
                        <label class="block text-base font-semibold text-gray-700 mb-1">Prix / mois (€)</label>
                        <input type="number" class="w-full border-2 border-black rounded-lg py-2 px-3 bg-white text-gray-900 text-base placeholder-gray-400 focus:outline-none" required />
                    </div>
                    <div>
                        <label class="block text-base font-semibold text-gray-700 mb-1">Prix / année (€)</label>
                        <input type="number" class="w-full border-2 border-black rounded-lg py-2 px-3 bg-white text-gray-900 text-base placeholder-gray-400 focus:outline-none" required />
                    </div>
                    <div class="md:col-span-2">
                        <label class="block text-base font-semibold text-gray-700 mb-1">Caution (€)</label>
                        <input type="number" class="w-full border-2 border-black rounded-lg py-2 px-3 bg-white text-gray-900 text-base placeholder-gray-400 focus:outline-none" required />
                    </div>
                </div>
                <div>
                    <label class="block text-base font-semibold text-gray-700 mb-1">Photo principale (obligatoire)</label>
                    <input type="file" accept="image/png, image/jpeg, image/webp"
                        class="w-full text-base file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-2 file:border-black file:text-black file:bg-white file:font-semibold" required />
                    <p class="text-xs text-gray-500 mt-1">Photo principale affichée sur l'annonce (formats : jpg, png, webp).</p>
                </div>
                <div>
                    <label class="block text-base font-semibold text-gray-700 mb-1">Photos annexes (optionnelles)</label>
                    <input type="file" multiple accept="image/png, image/jpeg, image/webp"
                        class="w-full text-base file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-2 file:border-black file:text-black file:bg-white file:font-semibold"/>
                    <p class="text-xs text-gray-500 mt-1">Ajoutez des photos supplémentaires si besoin (formats : jpg, png, webp).</p>
                </div>
                <div>
                    <label class="block text-base font-semibold text-gray-700 mb-1">Description</label>
                    <textarea rows="3"
                        class="w-full border-2 border-black rounded-lg py-2 px-3 bg-white text-gray-900 text-base placeholder-gray-400 focus:outline-none"></textarea>
                </div>
                <div class="flex flex-col md:flex-row md:gap-6 gap-3">
                    <button type="submit" class="bg-black text-white font-bold py-3 px-8 rounded-lg w-full text-lg hover:bg-gray-800 transition-all shadow-md">
                        Enregistrer les modifications
                    </button>
                    <button type="button" id="btn-annuler-modif" class="bg-white text-black font-bold py-3 px-8 rounded-lg border-2 border-black w-full text-lg hover:bg-gray-100 transition-all shadow-md">
                        Annuler les modifications
                    </button>
                </div>
            </form>
                `;
                formModif.classList.remove('hidden');
                formModif.scrollIntoView({behavior:"smooth", block:"start"});
                document.getElementById('btn-annuler-modif').addEventListener('click', function() {
                    formModif.classList.add('hidden');
                    formModif.innerHTML = '';
                });
            });
        });
        document.querySelectorAll('#bloc-modifier .btn-supprimer').forEach(function(btn){
            btn.addEventListener('click', function(e){
                e.preventDefault();
                const row = btn.closest('tr');
                row.style.opacity = 0.5; // Simule une suppression
                // Suppression réelle à relier à ton back ici si besoin.
            });
        });
    });
</script>

</body>
</html>
